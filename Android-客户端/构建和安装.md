# 构建Android应用程序

[TOC]

## 先决条件

- [Apache Ant](http://ant.apache.org/)
- Java JDK 6正确设置了`JAVA_HOME`环境变量
- [Android的SDK](https://developer.android.com/sdk/index.html)与API级别19和安装平台工具
- [Android NDK](https://developer.android.com/tools/sdk/ndk/index.html) Revision 9d或更新版本

有关更多信息，请参阅Android [开发人员文档](https://developer.android.com/sdk/index.html)。

## 构建步骤

在您选择的目录中并排查看SVMP客户端和协议

```
git clone https://github.com/ SVMP /svmp-protocol-def.git
git clone https://github.com/ SVMP /svmp-android-client.git
```

使用ant构建客户端。

```
cd svmp-android-client
蚂蚁调试
```

[此处](https://developer.android.com/tools/building/building-cmdline.html#AntReference)记录[了](https://developer.android.com/tools/building/building-cmdline.html#AntReference)其他ant命令。

还包括Gradle构建文件，但建议使用Ant。需要Gradle 1.10,1.11或1.12。使用gradle构建应用程序：

```
cd svmp-android-client
gradle build
```

## 使用服务器证书固定构建

默认情况下，客户端应用程序在连接到受TLS保护的服务器时将使用Android的内置CA证书存储区。要仅允许特定的服务器证书或特定的签名CA，您可以在构建时添加自己的一组“固定”证书。

将您选择的证书放入PEM格式的`svmp-android-client/server_certs/`目录中。构建过程将获取该目录中具有扩展名的任何文件，并将它们编译到引脚列表中。`.pem`

如果您不想使用固定，请将此目录留空。如果使用您自己的自签名证书，您可以将证书放在此处的引脚列表中，或者在运行时启用允许不受信任的证书。有关后者的更多信息，请参阅[客户端配置指南](https://svmp.github.io/client-android-using.html)。

## 集成开发环境





有关在Eclipse和IntelliJ IDEA IDE中为SVMP设置项目的说明，请参见[自述文件](https://github.com/SVMP/svmp-android-client/blob/master/README.md)。

## 安装

首先启用从手机上的[未知来源](https://developer.android.com/distribute/tools/open-distribution.html#unknown-sources)安装应用程序。

- 将APK发布在网站上，浏览器发布到手机上的链接。

- 将APK附加到电子邮件中并将其发送到手机。

- 使用Ant和ADB通过

  USB

  安装：

  

  

  ```
    ant installd 
    ...或... 
    adb install bin / ConnectionList-debug.apk
    
  ```

**注意**：由于使用某些OpenGL ES调用，SVMP客户端应用程序在Android SDK模拟器中无法正常运行。